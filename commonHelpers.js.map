{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import 'modern-normalize/modern-normalize.css';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = new Date();\nlet currentDate = new Date();\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    checkDateOnClose(userSelectedDate);\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nconst elements = {\n  button: document.querySelector('button[data-start]'),\n  input: document.querySelector('#datetime-picker'),\n  days: document.querySelector('.value[data-days]'),\n  hours: document.querySelector('.value[data-hours]'),\n  minutes: document.querySelector('.value[data-minutes]'),\n  seconds: document.querySelector('.value[data-seconds]'),\n};\n\ndisabledBtn(elements.button);\nelements.button.addEventListener('click', clickHandler);\n\nfunction clickHandler() {\n  const userDate = userSelectedDate.getTime();\n  const nowDate = new Date().getTime();\n  const diff = userDate - nowDate;\n  const dateObj = convertMs(diff);\n\n  if (checkDateOnClick(diff)) {\n    startTimmer(dateObj, diff);\n  }\n}\n\nfunction startTimmer(obj, number) {\n  disabledBtn(elements.button);\n  disabledInput(elements.input);\n\n  let { days, hours, minutes, seconds } = obj;\n\n  let id = setInterval(() => {\n    elements.days.textContent = days.toString().padStart(2, '0');\n    elements.hours.textContent = hours.toString().padStart(2, '0');\n    elements.minutes.textContent = minutes.toString().padStart(2, '0');\n    elements.seconds.textContent = seconds.toString().padStart(2, '0');\n\n    seconds -= 1;\n    number -= 1000;\n\n    if (number < 0) {\n      clearInterval(id);\n      elements.input.removeAttribute('disabled');\n    }\n\n    if (seconds < 0 && minutes >= 0) {\n      seconds = 59;\n      minutes -= 1;\n      if (minutes < 0 && hours >= 0) {\n        minutes = 59;\n        hours -= 1;\n        if (hours < 0 && days >= 0) {\n          days -= 1;\n          hours = 23;\n        }\n      }\n    }\n  }, 1000);\n}\n\nfunction checkDateOnClose(ms) {\n  const diff = ms.getTime() - currentDate.getTime();\n  if (diff <= 0) {\n    iziToast.show({\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n      messageColor: 'black',\n      color: 'red',\n    });\n    disabledBtn(elements.button);\n    return;\n  }\n  abledBtn(elements.button);\n}\n\nfunction checkDateOnClick(ms) {\n  if (ms <= 0) {\n    iziToast.show({\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n      messageColor: 'black',\n      color: 'red',\n    });\n    disabledBtn(elements.button);\n    return;\n  }\n  abledBtn(elements.button);\n  return true;\n}\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction disabledBtn(btn) {\n  btn.setAttribute('disabled', '');\n  btn.style.backgroundColor = '#cfcfcf';\n  btn.style.color = '#989898';\n}\n\nfunction abledBtn(btn) {\n  btn.removeAttribute('disabled');\n  btn.style.backgroundColor = '#4e75ff';\n  btn.style.color = '#fff';\n}\n\nfunction disabledInput(input) {\n  input.disabled = 'true';\n}\n"],"names":["userSelectedDate","currentDate","options","selectedDates","checkDateOnClose","flatpickr","elements","disabledBtn","clickHandler","userDate","nowDate","diff","dateObj","convertMs","checkDateOnClick","startTimmer","obj","number","disabledInput","days","hours","minutes","seconds","id","ms","iziToast","abledBtn","btn","input"],"mappings":"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"}